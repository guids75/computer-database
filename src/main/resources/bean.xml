<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd">

	<context:property-placeholder location="classpath:hikariConnection.properties" />

	<context:annotation-config />

	<bean id="dataSource" class="com.zaxxer.hikari.HikariDataSource"
		destroy-method="close">
		<property name="dataSourceClassName" value="${className}" />
		<property name="maximumPoolSize" value="10" />
		<property name="maxLifetime" value="1800000" />
		<property name="idleTimeout" value="600000" />
		<property name="connectionTimeout" value="60000" />
		<property name="dataSourceProperties">
			<props>
				<prop key="url">${url}</prop>
				<prop key="user">${login}</prop>
				<prop key="password">${password}</prop>
				<prop key="prepStmtCacheSize">250</prop>
				<prop key="prepStmtCacheSqlLimit">2048</prop>
				<prop key="cachePrepStmts">true</prop>
				<prop key="useServerPrepStmts">true</prop>
			</props>
		</property>
	</bean>


	<bean name="companyDao"
		class="com.excilys.formation.computerdatabase.persistence.company.CompanyDaoImpl">
		<property name="dataSource" ref="dataSource" />
	</bean>

	<bean name="computerDao"
		class="com.excilys.formation.computerdatabase.persistence.computer.ComputerDaoImpl">
		<property name="dataSource" ref="dataSource" />
	</bean>


	<bean name="companyService"
		class="com.excilys.formation.computerdatabase.service.company.CompanyServiceImpl">
		<property name="dataSource" ref="dataSource" />
		<property name="companyDao" ref="companyDao" />
		<property name="computerDao" ref="computerDao" />
	</bean>

	<bean name="computerService"
		class="com.excilys.formation.computerdatabase.service.computer.ComputerServiceImpl">
		<property name="dataSource" ref="dataSource" />
		<property name="computerDao" ref="computerDao" />
	</bean>


  	<bean name="companyUi"
		class="com.excilys.formation.computerdatabase.ui.company.CompanyUiImpl">
		<property name="companyService" ref="companyService" />
	</bean> 

	<bean name="computerUi"
		class="com.excilys.formation.computerdatabase.ui.computer.ComputerUiImpl">
		<property name="companyService" ref="companyService" />
		<property name="computerService" ref="computerService" />
	</bean>

 	<bean name="cli" class="com.excilys.formation.computerdatabase.ui.Cli">
		<property name="companyUi" ref="companyUi" />
		<property name="computerUi" ref="computerUi" />
	</bean>
	

	<bean name="addComputer"
		class="com.excilys.formation.computerdatabase.servlet.AddComputer">
		<property name="companyService" ref="companyService" />
		<property name="computerService" ref="computerService" />
	</bean>

	<bean name="dashboard"
		class="com.excilys.formation.computerdatabase.servlet.Dashboard">
		<property name="computerService" ref="computerService" />
	</bean>

	<bean name="dashboardSubmit"
		class="com.excilys.formation.computerdatabase.servlet.DashboardSubmit">
		<property name="computerService" ref="computerService" />
	</bean>

	<bean name="deleteComputer"
		class="com.excilys.formation.computerdatabase.servlet.DeleteComputer">
		<property name="computerService" ref="computerService" />
	</bean>

	<bean name="editComputer"
		class="com.excilys.formation.computerdatabase.servlet.EditComputer">
		<property name="companyService" ref="companyService" />
		<property name="computerService" ref="computerService" />
	</bean>

</beans>